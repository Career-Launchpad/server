{"version":3,"sources":["../../src/lib/login.js"],"names":["ctx","sls","cli","log","service","tenant","process","exit","app"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;0BAEe,iBAAeA,GAAf;AAAA;AAAA;AAAA;AAAA;AACbA,YAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CAAgB,4CAAhB,EAA8D,uBAA9D,EADa,CAEb;AACA;;AAHa;AAAA;AAAA,mBAKL,wBAAMH,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBC,MAAtB,CALK;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAOX,gBAAI,gBAAQ,qCAAZ,EAAmD;AACjDL,cAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CACE,qLADF,EAEE,uBAFF;AAIAG,cAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;;AAbU;AAebP,YAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CAAgB,qDAAhB,EAAuE,uBAAvE;;AACA,gBAAI,CAACH,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBC,MAAjB,IAA2B,CAACL,GAAG,CAACC,GAAJ,CAAQG,OAAR,CAAgBI,GAAhD,EAAqD;AACnDR,cAAAA,GAAG,CAACC,GAAJ,CAAQC,GAAR,CAAYC,GAAZ,CACE,uIADF,EAEE,uBAFF;AAID;;AACDG,YAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;;AAtBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { login } from '@serverless/platform-sdk'\n\nexport default async function(ctx) {\n  ctx.sls.cli.log('Logging you in via your default browser...', 'Serverless Enterprise')\n  // Include a \"tenant\" in \"login()\"...\n  // This will create a new accessKey for that tenant on every login.\n  try {\n    await login(ctx.sls.service.tenant)\n  } catch (err) {\n    if (err === 'Complete sign-up before logging in.') {\n      ctx.sls.cli.log(\n        \"Please complete sign-up at dashboard.serverless.com, configure your service with the tenant and application (documentation - https://git.io/fjl3F) and run 'serverless login' again\",\n        'Serverless Enterprise'\n      )\n      process.exit(1)\n    }\n  }\n  ctx.sls.cli.log('You sucessfully logged in to Serverless Enterprise.', 'Serverless Enterprise')\n  if (!ctx.sls.service.tenant || !ctx.sls.service.app) {\n    ctx.sls.cli.log(\n      \"Please configure your service with the tenant and application (documentation - https://git.io/fjl3F) and run 'serverless login' again\",\n      'Serverless Enterprise'\n    )\n  }\n  process.exit(0)\n}\n"],"file":"login.js"}