{"version":3,"sources":["../../src/lib/removeDestination.js"],"names":["ctx","sls","service","custom","enterprise","collectLambdaLogs","tenant","accessKey","destinationOpts","appUid","tenantUid","serviceName","getServiceName","stageName","provider","getStage","regionName","getRegion"],"mappings":";;;;;;;AAAA;;;;;;;;;;;0BAEe,iBAAOA,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEX,CAACA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAjB,IACA,CAACH,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UADxB,IAEA,CAACJ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UAAvB,CAAkCC,iBAJxB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAQW,wCAAsBL,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBI,MAAtC,CARX;;AAAA;AAQPC,YAAAA,SARO;AASPC,YAAAA,eATO,GASW;AACtBD,cAAAA,SADsB;AAEtBE,cAAAA,MAAM,EAAET,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBO,MAFF;AAGtBC,cAAAA,SAAS,EAAEV,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBQ,SAHL;AAItBC,cAAAA,WAAW,EAAEX,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBU,cAAhB,EAJS;AAKtBC,cAAAA,SAAS,EAAEb,GAAG,CAACc,QAAJ,CAAaC,QAAb,EALW;AAMtBC,cAAAA,UAAU,EAAEhB,GAAG,CAACc,QAAJ,CAAaG,SAAb;AANU,aATX;AAAA;AAAA,mBAkBP,uCAAqBT,eAArB,CAlBO;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { getAccessKeyForTenant, removeLogDestination } from '@serverless/platform-sdk'\n\nexport default async (ctx) => {\n  if (\n    !ctx.sls.service.custom ||\n    !ctx.sls.service.custom.enterprise ||\n    !ctx.sls.service.custom.enterprise.collectLambdaLogs\n  ) {\n    return\n  }\n  const accessKey = await getAccessKeyForTenant(ctx.sls.service.tenant)\n  const destinationOpts = {\n    accessKey,\n    appUid: ctx.sls.service.appUid,\n    tenantUid: ctx.sls.service.tenantUid,\n    serviceName: ctx.sls.service.getServiceName(),\n    stageName: ctx.provider.getStage(),\n    regionName: ctx.provider.getRegion()\n  }\n\n  await removeLogDestination(destinationOpts)\n  return\n}\n"],"file":"removeDestination.js"}